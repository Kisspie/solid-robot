<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ë°°ë“œë¯¼í„´ ëŒ€ì§„í‘œ ìƒì„±ê¸°</title>
  <style>
    body{font-family:'Noto Sans KR',sans-serif;margin:0;background:#f7fafc;padding:20px;}
    .container{max-width:1100px;margin:0 auto;background:white;padding:20px;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,0.05);}
    h1{margin-top:0;text-align:center;}
    input,select,button{padding:8px;margin:4px;border-radius:8px;border:1px solid #ccc;}
    button{background:#2563eb;color:white;border:none;cursor:pointer;}
    button:hover{background:#1d4ed8;}
    .players{margin-top:10px;border:1px dashed #ccc;padding:10px;min-height:40px;border-radius:8px;}
    .match{padding:8px;margin:8px 0;background:#e0f2fe;border-radius:8px;}
    .leftovers{background:#fff3cd;border:1px solid #ffeeba;padding:10px;border-radius:8px;margin-top:10px;}
    .court{font-weight:bold;}
    .small{font-size:13px;color:#475569;margin-bottom:8px;}
  </style>
</head>
<body>
<div class="container">
  <h1>ğŸ¸ ë°°ë“œë¯¼í„´ ëŒ€ì§„í‘œ ìƒì„±ê¸°</h1>
  <p class="small">ì„ ìˆ˜ë¥¼ ë“±ë¡í•œ í›„ ì „ì²´ ë˜ëŠ” ì¡°ë³„ë¡œ ë¬´ì‘ìœ„ 2:2 ëŒ€ì§„í‘œë¥¼ ìƒì„±í•©ë‹ˆë‹¤. (ìµœëŒ€ 40ëª…)</p>
  <div>
    <input id="name" placeholder="ì´ë¦„ ì…ë ¥" />
    <select id="age">
      <option>20ëŒ€</option><option>30ëŒ€</option><option>40ëŒ€</option><option>50ëŒ€</option><option>60ëŒ€</option>
    </select>
    <select id="gender">
      <option>ë‚¨ì</option><option>ì—¬ì</option>
    </select>
    <select id="group">
      <option>Aì¡°</option><option>Bì¡°</option><option>Cì¡°</option><option>Dì¡°</option><option>Eì¡°</option>
    </select>
    <button onclick="addPlayer()">ì¶”ê°€</button>
  </div>

  <div class="players" id="playerList">ë“±ë¡ëœ ì„ ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.</div>

  <div style="margin-top:12px;">
    <button onclick="makeDraw(false)">ì „ì²´ ëœë¤ ëŒ€ì§„í‘œ ìƒì„±</button>
    <button onclick="makeDraw(true)">ì¡°ë³„ ëœë¤ ëŒ€ì§„í‘œ ìƒì„±</button>
    <button onclick="resetCourts()">ì½”íŠ¸ ì´ˆê¸°í™”</button>
  </div>

  <div id="draw"></div>
</div>

<script>
let players = [];
let courtStatus = Array(8).fill(false); // 1~8ì½”íŠ¸ ìƒíƒœ

function addPlayer() {
  const name = document.getElementById('name').value.trim();
  const age = document.getElementById('age').value;
  const gender = document.getElementById('gender').value;
  const group = document.getElementById('group').value;
  if (!name) return alert('ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”!');
  if (players.length >= 40) return alert('ìµœëŒ€ 40ëª…ê¹Œì§€ë§Œ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
  players.push({ name, age, gender, group });
  document.getElementById('name').value = '';
  renderPlayers();
}

function renderPlayers() {
  const list = document.getElementById('playerList');
  if (players.length === 0) {
    list.innerHTML = 'ë“±ë¡ëœ ì„ ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.';
    return;
  }
  list.innerHTML = players.map((p,i)=>`${i+1}. ${p.name} (${p.age}, ${p.gender}, ${p.group})`).join('<br>');
}

function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function makeDraw(byGroup) {
  if (players.length < 4) return alert('ìµœì†Œ 4ëª… ì´ìƒ ë“±ë¡í•´ì•¼ í•©ë‹ˆë‹¤.');
  let filtered = players;
  if (byGroup) {
    const group = prompt('ëŒ€ì§„í‘œë¥¼ ìƒì„±í•  ì¡°(A~E)ë¥¼ ì…ë ¥í•˜ì„¸ìš”.').toUpperCase();
    filtered = players.filter(p => p.group === group);
    if (filtered.length < 4) return alert(`${group}ì¡° ì¸ì›ì´ 4ëª… ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.`);
  }
  filtered = shuffle([...filtered]);

  const matches = [];
  while (filtered.length >= 4 && matches.length < 8) {
    const team = filtered.splice(0,4);
    matches.push(team);
  }

  const leftovers = filtered.map(p => p.name);
  const output = document.getElementById('draw');
  let html = '';
  matches.forEach((m,i)=>{
    const courtNum = i+1;
    if (courtStatus[i]) {
      html += `<div class='match'><span class='court'>${courtNum}ì½”íŠ¸</span>: <b>ëŒ€ê¸° ì¤‘ (ì½”íŠ¸ ì‚¬ìš© ì¤‘)</b></div>`;
    } else {
      html += `<div class='match'><span class='court'>${courtNum}ì½”íŠ¸</span>: 
      ${m[0].name}, ${m[1].name} vs ${m[2].name}, ${m[3].name}</div>`;
      courtStatus[i] = true;
    }
  });
  if (leftovers.length) html += `<div class='leftovers'>ë‚¨ì€ ì¸ì›: ${leftovers.join(', ')}</div>`;
  output.innerHTML = html;
}

function resetCourts() {
  courtStatus = Array(8).fill(false);
  document.getElementById('draw').innerHTML = '';
  alert('ëª¨ë“  ì½”íŠ¸ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
}
</script>
</body>
</html>